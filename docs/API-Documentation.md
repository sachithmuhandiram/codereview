# API document

This will describe publically exposed APIs in the system, their inputs and outputs. Also a short description about how they work internally.

1. `gateway:port/login`<br>
    Method : `GET`

    This will return login page to user. Also adds a `logintoken` to the oage, Which will be to `userlogin` route.<br>
    `logintoken` is valid for 10 minutes.

2. `gateway:port/userlogin`<br>
    Method : `POST`
    
    Inputs :

    * Username : email address (field name = email)
    * Password : any string    (field name = password)
    * Login tokne : token ( filed name = logintoken)

    All inputs are mandetory. Route will first check whether given email address has a valid email syntax  using regular expression. If so, then checks whether password field is empty. If so returns back to `gateway:port/login`.
    If `username` and `password` syntax validated, then it checks whether there is a record for `logintoken`. If `login_token` in `api_gateway` databases. It sends to `User Service` to check username and password combination.<br>

    After sending `username` and `password` to User Service, that login token will be deleted from database.

3. `gateway:port/createsession` (Internal) <br>
    Method : `GET`

    Inputs : From User Service <br>
    * uuid          : Unique ID generated by Gatway when it receives first request.
    * authorized    : If user authentication success, this is set to `1` by user service, else `0`

    If user is authenticated, then JWT is generated to add to response and send `/home` route.

4. `gateway:port/home`<br>
    Method : `GET`

    This is Home page for individual user. When a request hits here, checks whether it has a valid JWT, if it doesnt then redirect to `/login` route.<br>
    Valid JWT expire time will increase (need to update).

5. `gateway:port/getemail`<br>
    Method : `POST`

    When a user wants to register for the system, this route will get `email` address and check whether its a `POST` ,and then validate email syntax.<br>
    Then email is sent to check whether email associated with a user account.<br>

    If email associats with an user account, then email will be sent to user to `login`<br>
    If email doent not have an account, a register email will send.

    - Tokens are inserted with email link, and need to make this into database and validating the process.

    
